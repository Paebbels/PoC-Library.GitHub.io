

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Wrapper Script Hook Files &mdash; The PoC-Library 1.1.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="The PoC-Library 1.1.2 documentation" href="../index.html"/>
        <link rel="up" title="More References" href="more.html"/>
        <link rel="next" title="File Formats" href="FileFormats/index.html"/>
        <link rel="prev" title="List of Supported Boards" href="ListOfBoards.html"/> 

  
  <script src="../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The PoC-Library
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../WhatIsPoC/index.html">What is PoC?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QuickStart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GetInvolved/index.html">Get Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="Licenses/License.html">Apache License 2.0</a></li>
</ul>
<p class="caption"><span class="caption-text">Main Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../UsingPoC/index.html">Using PoC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Interfaces/index.html">IP Core Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IPCores/index.html">IP Core Documentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Miscelaneous/ThirdParty.html">Third Party Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConstraintFiles/index.html">Constraint Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ToolChains/index.html">Tool Chain Specifics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/index.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="CommandReference.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database.html">IP Core Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PyInfrastructure/index.html">Python Infrastructure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="more.html">More ...</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ListOfDevices.html">List of Supported FPGA Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="ListOfBoards.html">List of Supported Boards</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Wrapper Script Hook Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flexlm">FlexLM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="FileFormats/index.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="NamingConventions.html">Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="KnownIssues.html">Known Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="Licenses/index.html">Local License Copies</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ChangeLog/index.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>
<p class="caption"><span class="caption-text">Internal</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Internal/ToDo.html">ToDo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Internal/Sphinx.html">Sphinx</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The PoC-Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="more.html">More References</a> &raquo;</li>
        
      <li>Wrapper Script Hook Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../sources/References/WrapperScriptHookFiles.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="wrapper-script-hook-files">
<h1>Wrapper Script Hook Files<a class="headerlink" href="#wrapper-script-hook-files" title="Permalink to this headline">¶</a></h1>
<p>The shell scripts <code class="docutils literal"><span class="pre">poc.ps1</span></code> and <code class="docutils literal"><span class="pre">poc.sh</span></code> can be customized though hook
files, which are executed before and after a PoC command is executed. The
wrapper scripts support 4 kinds of hook files:</p>
<blockquote>
<div><ul class="simple">
<li>VendorPreHookFile</li>
<li>ToolPreHookFile</li>
<li>VendorPostHookFile</li>
<li>ToolPostHookFile</li>
</ul>
</div></blockquote>
<p>The wrapper scans the arguments given to the front-end script and searches
for known commands. If one is found, the hook files are scheduled before and
after the execution of the wrapped executable. The hook files are sourced
into the current execution and need to be located in the <code class="docutils literal"><span class="pre">./py/Wrapper/Hooks</span></code>
directory.</p>
<p>A common use case is the preparation of special vendor or tool chain
environments. For example many EDA tools are using FlexLM as a license manager,
which needs the environments variable <code class="docutils literal"><span class="pre">LM_LICENSE_FILE</span></code> to be set. A
<code class="docutils literal"><span class="pre">PreHookFile</span></code> can be used to load/export such an environment variable.</p>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p><strong>Mentor QuestaSim on Linux:</strong></p>
<p>The PoC infrastructure is called with this command line:</p>
<div class="highlight-Bash"><div class="highlight"><pre><span></span>./poc.sh -v vsim PoC.arith.prng
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">vsim</span></code> command is recognized and the following events are scheduled:</p>
<blockquote>
<div><ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">source</span> <span class="pre">./py/Wrapper/Hooks/Mentor.pre.sh</span></code></li>
<li><code class="docutils literal"><span class="pre">source</span> <span class="pre">./py/Wrapper/Hooks/Mentor.QuestaSim.pre.sh</span></code></li>
<li>Execute <code class="docutils literal"><span class="pre">./py/PoC.py</span> <span class="pre">-v</span> <span class="pre">vsim</span> <span class="pre">PoC.arith.prng</span></code></li>
<li><code class="docutils literal"><span class="pre">source</span> <span class="pre">./py/Wrapper/Hooks/Mentor.QuestaSim.post.sh</span></code></li>
<li><code class="docutils literal"><span class="pre">source</span> <span class="pre">./py/Wrapper/Hooks/Mentor.post.sh</span></code></li>
</ol>
</div></blockquote>
<p>If a hook files doesn&#8217;t exist, it&#8217;s skipped.</p>
<p><strong>Mentor QuestaSim on Windows:</strong></p>
<p>The PoC infrastructure is called with this command line:</p>
<div class="highlight-PowerShell"><div class="highlight"><pre><span></span><span class="p">.\</span><span class="n">poc</span><span class="p">.</span><span class="n">ps1</span> <span class="n">-v</span> <span class="n">vsim</span> <span class="n">PoC</span><span class="p">.</span><span class="n">arith</span><span class="p">.</span><span class="n">prng</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">vsim</span></code> command is recognized and the following events are scheduled:</p>
<blockquote>
<div><ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">.</span> <span class="pre">.\py\Wrapper\Hooks\Mentor.pre.ps1</span></code></li>
<li><code class="docutils literal"><span class="pre">.</span> <span class="pre">.\py\Wrapper\Hooks\Mentor.QuestaSim.pre.ps1</span></code></li>
<li>Execute <code class="docutils literal"><span class="pre">.\py\PoC.py</span> <span class="pre">-v</span> <span class="pre">vsim</span> <span class="pre">PoC.arith.prng</span></code></li>
<li><code class="docutils literal"><span class="pre">.</span> <span class="pre">.\py\Wrapper\Hooks\Mentor.QuestaSim.post.ps1</span></code></li>
<li><code class="docutils literal"><span class="pre">.</span> <span class="pre">.\py\Wrapper\Hooks\Mentor.post.ps1</span></code></li>
</ol>
</div></blockquote>
<p>If a hook files doesn&#8217;t exist, it&#8217;s skipped.</p>
</div>
<div class="section" id="flexlm">
<h2>FlexLM<a class="headerlink" href="#flexlm" title="Permalink to this headline">¶</a></h2>
<p>Many EDA tools require an environment variable called <code class="docutils literal"><span class="pre">LM_LICENSE_FILE</span></code>.
If no other tool settings are required, a common <code class="docutils literal"><span class="pre">FlexLM.sh</span></code> can be
generated. This file is used as a symlink target for each tool specific
hook file.</p>
<p><strong>Content of the `FlexLM.sh` script:</strong></p>
<div class="highlight-Bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LM_LICENSE_FILE</span><span class="o">=</span><span class="m">1234</span>@flexlm.company.com
</pre></div>
</div>
<p><strong>Create symlinks:</strong></p>
<div class="highlight-Bash"><div class="highlight"><pre><span></span>ln -s FlexLM.sh Altera.Quartus.pre.sh
ln -s FlexLM.sh Mentor.QuestaSim.pre.sh
</pre></div>
</div>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="FileFormats/index.html" class="btn btn-neutral float-right" title="File Formats" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ListOfBoards.html" class="btn btn-neutral" title="List of Supported Boards" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2007-2016 Technische Universitaet Dresden - Germany, Chair of VLSI-Design, Diagnostics and Architecture.
      Last updated on Mar 12, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../static/jquery.js"></script>
      <script type="text/javascript" src="../static/underscore.js"></script>
      <script type="text/javascript" src="../static/doctools.js"></script>
      <script type="text/javascript" src="http://wavedrom.com/skins/default.js"></script>
      <script type="text/javascript" src="http://wavedrom.com/WaveDrom.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
